# ğŸ—„ï¸ ì˜ë£Œê¸°ê´€ ë°ì´í„°ë² ì´ìŠ¤ ì •ê·œí™” ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

## ğŸ“‹ **ê°œìš”**

`im_medical_institutions` í…Œì´ë¸”ì˜ 78,236ê°œ ë ˆì½”ë“œë¥¼ ì •ê·œí™”í•˜ì—¬ ë‹¤ìŒ 4ê°œ í…Œì´ë¸”ë¡œ ë¶„ë¦¬í•˜ëŠ” ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.

### **ëŒ€ìƒ í…Œì´ë¸”**
- `medical_institution` - ê¸°ë³¸ ì •ë³´
- `medical_institution_facility` - ì‹œì„¤ ì •ë³´  
- `medical_institution_hospital` - ë³‘ì› ì„¸ë¶€ ì •ë³´
- `medical_institution_specialty` - ì§„ë£Œê³¼ëª© ì •ë³´
- `medical_institution_contact` - ì—°ë½ì²˜ ì •ë³´ (ì¶”ê°€)

---

## ğŸš€ **ì‹¤í–‰ ìˆœì„œ**

### **1ë‹¨ê³„: í…Œì´ë¸” ìƒì„±**
```bash
# Docker ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰
docker exec parmderi_mariadb mariadb -udevh -pA77ila@ htest < migration_scripts/01_create_normalized_tables.sql
```

**ì‹¤í–‰ ë‚´ìš©:**
- âœ… 5ê°œì˜ ì •ê·œí™”ëœ í…Œì´ë¸” ìƒì„±
- âœ… ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ ì„¤ì •
- âœ… ì¸ë±ìŠ¤ ìµœì í™”
- âœ… í†µí•© ë·°(`v_medical_institution_full`) ìƒì„±

### **2ë‹¨ê³„: ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜**
```bash
# Docker ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰ (ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ìˆ˜ ìˆìŒ)
docker exec parmderi_mariadb mariadb -udevh -pA77ila@ htest < migration_scripts/02_migrate_data.sql
```

**ì‹¤í–‰ ë‚´ìš©:**
- âœ… ê¸°ë³¸ ì •ë³´ 78,236ê°œ ë ˆì½”ë“œ ì´ì „
- âœ… ì‹œì„¤ ì •ë³´ ì´ì „ (ì¢Œí‘œ ë°ì´í„° ìˆëŠ” ê²½ìš°)
- âœ… ë³‘ì› ì •ë³´ ì´ì „ (ì˜ì‚¬ ìˆ˜, ë“±ê¸‰ ë¶„ë¥˜)
- âœ… ì§„ë£Œê³¼ëª©ë³„ ì˜ì‚¬ ìˆ˜ ì´ì „ (13ê°œ ì¹´í…Œê³ ë¦¬)
- âœ… ì—°ë½ì²˜ ì •ë³´ ì´ì „
- âœ… íŠ¸ëœì­ì…˜ ê¸°ë°˜ ì•ˆì „í•œ ë§ˆì´ê·¸ë ˆì´ì…˜

### **3ë‹¨ê³„: ê²€ì¦ ë° ìµœì í™”**
```bash
# Docker ì»¨í…Œì´ë„ˆì—ì„œ ì‹¤í–‰
docker exec parmderi_mariadb mariadb -udevh -pA77ila@ htest < migration_scripts/03_validate_and_cleanup.sql
```

**ì‹¤í–‰ ë‚´ìš©:**
- âœ… ë°ì´í„° ë¬´ê²°ì„± ê²€ì¦
- âœ… ì™¸ë˜í‚¤ ê´€ê³„ í™•ì¸
- âœ… ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
- âœ… ìƒ˜í”Œ ì¿¼ë¦¬ ì‹¤í–‰
- âœ… ì™„ë£Œ ë³´ê³ ì„œ ìƒì„±

---

## â±ï¸ **ì˜ˆìƒ ì‹¤í–‰ ì‹œê°„**

| ë‹¨ê³„ | ì˜ˆìƒ ì‹œê°„ | ì„¤ëª… |
|------|-----------|------|
| 1ë‹¨ê³„ | 5-10ë¶„ | í…Œì´ë¸” ìƒì„± ë° ì¸ë±ìŠ¤ ì„¤ì • |
| 2ë‹¨ê³„ | 30-60ë¶„ | 78,236ê°œ ë ˆì½”ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜ |
| 3ë‹¨ê³„ | 10-15ë¶„ | ê²€ì¦ ë° ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ |
| **ì´í•©** | **45-85ë¶„** | ë°ì´í„° ì–‘ì— ë”°ë¼ ë³€ë™ |

---

## ğŸ“Š **ë§ˆì´ê·¸ë ˆì´ì…˜ ê²°ê³¼ ì˜ˆìƒ**

### **í…Œì´ë¸”ë³„ ì˜ˆìƒ ë ˆì½”ë“œ ìˆ˜**
```
medical_institution:          78,236ê°œ (ê¸°ë³¸ ì •ë³´)
medical_institution_facility: 50,000ê°œ (ì¢Œí‘œ ìˆëŠ” ê¸°ê´€)
medical_institution_hospital: 70,000ê°œ (ì˜ì‚¬ ì •ë³´ ìˆëŠ” ê¸°ê´€)
medical_institution_specialty: 300,000ê°œ (ì§„ë£Œê³¼ëª©ë³„ ë°ì´í„°)
medical_institution_contact: 75,000ê°œ (ì „í™”ë²ˆí˜¸ ìˆëŠ” ê¸°ê´€)
```

### **ì •ê·œí™” ì´ì **
- ğŸ¯ **ì¤‘ë³µ ë°ì´í„° ì œê±°**: ì•½ 30% ì €ì¥ê³µê°„ ì ˆì•½
- ğŸ” **ì¿¼ë¦¬ ì„±ëŠ¥ í–¥ìƒ**: ì¸ë±ìŠ¤ ìµœì í™”ë¡œ ê²€ìƒ‰ ì†ë„ ì¦ê°€
- ğŸ›¡ï¸ **ë°ì´í„° ë¬´ê²°ì„±**: ì™¸ë˜í‚¤ ì œì•½ì¡°ê±´ìœ¼ë¡œ ì¼ê´€ì„± ë³´ì¥
- ğŸ“ˆ **í™•ì¥ì„±**: ëª¨ë“ˆí™”ëœ êµ¬ì¡°ë¡œ ìœ ì§€ë³´ìˆ˜ ìš©ì´

---

## âš ï¸ **ì£¼ì˜ì‚¬í•­**

### **ì‹¤í–‰ ì „ í•„ìˆ˜ ì‘ì—…**
1. **ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…**
   ```bash
   docker exec parmderi_mariadb mysqldump -udevh -pA77ila@ htest > backup_$(date +%Y%m%d_%H%M%S).sql
   ```

2. **ì¶©ë¶„í•œ ë””ìŠ¤í¬ ê³µê°„ í™•ë³´**
   - ìµœì†Œ 2GB ì—¬ìœ  ê³µê°„ í•„ìš”
   - ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘ ì„ì‹œ ë°ì´í„° ìƒì„±

3. **ë‹¤ë¥¸ ì‘ì—… ì¤‘ë‹¨**
   - ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¼ì‹œ ì¤‘ë‹¨ ê¶Œì¥
   - ë™ì‹œ ë°ì´í„° ìˆ˜ì • ë°©ì§€

### **ë¬¸ì œ ë°œìƒ ì‹œ ëŒ€ì²˜**
```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘ë‹¨ ì‹œ ë¡¤ë°±
docker exec parmderi_mariadb mariadb -udevh -pA77ila@ htest -e "ROLLBACK;"

# ë°±ì—…ì—ì„œ ë³µêµ¬
docker exec -i parmderi_mariadb mariadb -udevh -pA77ila@ htest < backup_file.sql
```

---

## ğŸ“ **ì‹¤í–‰ ë¡œê·¸ í™•ì¸**

### **ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§**
```bash
# ë³„ë„ í„°ë¯¸ë„ì—ì„œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
docker exec parmderi_mariadb mariadb -udevh -pA77ila@ htest -e "SHOW PROCESSLIST;"

# í…Œì´ë¸” í¬ê¸° í™•ì¸
docker exec parmderi_mariadb mariadb -udevh -pA77ila@ htest -e "
SELECT table_name, table_rows 
FROM information_schema.tables 
WHERE table_schema = 'htest' 
AND table_name LIKE 'medical_%';"
```

### **ì™„ë£Œ í™•ì¸**
```bash
# ìµœì¢… ë ˆì½”ë“œ ìˆ˜ í™•ì¸
docker exec parmderi_mariadb mariadb -udevh -pA77ila@ htest -e "
SELECT 'medical_institution' as table_name, COUNT(*) as count FROM medical_institution
UNION ALL
SELECT 'medical_institution_facility', COUNT(*) FROM medical_institution_facility
UNION ALL  
SELECT 'medical_institution_hospital', COUNT(*) FROM medical_institution_hospital
UNION ALL
SELECT 'medical_institution_specialty', COUNT(*) FROM medical_institution_specialty;"
```

---

## ğŸ”„ **ì• í”Œë¦¬ì¼€ì´ì…˜ ì—…ë°ì´íŠ¸**

### **CodeIgniter ëª¨ë¸ ìˆ˜ì • í•„ìš”**
ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ í›„ ë‹¤ìŒ íŒŒì¼ë“¤ì„ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤:

1. **`Medical_data_model.php`**
   - ìƒˆë¡œìš´ í…Œì´ë¸” êµ¬ì¡°ì— ë§ê²Œ ì¿¼ë¦¬ ìˆ˜ì •
   - ì¡°ì¸ ì¿¼ë¦¬ ì¶”ê°€

2. **`Excel_upload.php`**
   - ì—…ë¡œë“œ ë¡œì§ì„ ì •ê·œí™”ëœ í…Œì´ë¸”ì— ë§ê²Œ ìˆ˜ì •

3. **ë·° íŒŒì¼ë“¤**
   - ë°ì´í„° í‘œì‹œ ë¡œì§ ì—…ë°ì´íŠ¸

### **API ì—”ë“œí¬ì¸íŠ¸ ì—…ë°ì´íŠ¸**
- REST API ì‘ë‹µ êµ¬ì¡° ë³€ê²½
- ê²€ìƒ‰ ê¸°ëŠ¥ ê°œì„ 
- í†µê³„ ê¸°ëŠ¥ ì—…ë°ì´íŠ¸

---

## ğŸ¯ **ì„±ê³µ ê¸°ì¤€**

### **ë§ˆì´ê·¸ë ˆì´ì…˜ ì„±ê³µ í™•ì¸**
âœ… ëª¨ë“  78,236ê°œ ë ˆì½”ë“œê°€ `medical_institution`ì— ì´ì „ë¨  
âœ… ì™¸ë˜í‚¤ ë¬´ê²°ì„± ê²€ì¦ í†µê³¼  
âœ… ê¸°ì¡´ ë°ì´í„°ì™€ ì •ê·œí™”ëœ ë°ì´í„° ì¼ì¹˜ í™•ì¸  
âœ… ìƒ˜í”Œ ì¿¼ë¦¬ ì •ìƒ ì‹¤í–‰  
âœ… ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í†µê³¼  

### **ë¡¤ë°± ì‹œë‚˜ë¦¬ì˜¤**
ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ íŠ¸ëœì­ì…˜ì´ ë¡¤ë°±ë˜ë©°, ê¸°ì¡´ `im_medical_institutions` í…Œì´ë¸”ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.

---

## ğŸ“ **ì§€ì›**

ë¬¸ì œ ë°œìƒ ì‹œ:
1. ì‹¤í–‰ ë¡œê·¸ í™•ì¸
2. ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ ì ê²€
3. ë°±ì—…ì—ì„œ ë³µêµ¬
4. ê°œë°œíŒ€ ë¬¸ì˜

**ë§ˆì´ê·¸ë ˆì´ì…˜ ì„±ê³µì„ ìœ„í•´ ë‹¨ê³„ë³„ë¡œ ì‹ ì¤‘í•˜ê²Œ ì§„í–‰í•˜ì„¸ìš”!** ğŸš€ 